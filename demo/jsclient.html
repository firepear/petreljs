<html>
  <head>
    <script src="sha256.js"></script>
    <script src="petrel-dev.js"></script>
  </head>
    <body>
    <button onclick="requestDatetime();">Send time request</button>
    <pre id="output"></pre>
  </body>
    <script>
    "use strict;"
function displayDatetime(msg) {
    out.innerHTML += "Request " + msg.seq + " completed. Response: " + msg.payload;
}
function requestDatetime() {
    out.innerHTML += "Time button clicked.\n";
    pjs.dispatch("time", displayDatetime);
    out.innerHTML += "Request " + pjs.seq + " dispatched.\n";
}

var wsaddr = "ws://localhost:60607/shim";
var out = document.getElementById('output');
out.innerHTML += 'Beginning demo 03-petreljs.\n';

out.innerHTML += 'Instantiating websocket.\n';
var ws = new WebSocket(wsaddr);

out.innerHTML += 'Instantiating PetrelClient.\n';
var pjs = new PetrelClient(ws);
    </script>
</html>
